<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Free Food Near Me | MealzMapz - Find Surplus Food & Community Kitchens{% endblock %}</title>
    
    <!-- Primary SEO Meta Tags -->
    <meta name="description" content="{% block meta_description %}Find free food near you instantly. MealzMapz connects surplus food from restaurants with people in need. Locate community kitchens, food banks, and free meal programs in your area. Reduce food waste, feed communities.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}free food near me, surplus food, food donation, community kitchen, food bank near me, free meals today, restaurant leftovers, reduce food waste, food insecurity, donate leftover food, food rescue, meal assistance, emergency food help, free groceries, food pantry locations{% endblock %}">
    <meta name="author" content="MealzMapz">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="google" content="nositelinkssearchbox">
    <meta name="google" content="notranslate">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}{{ request.url }}{% endblock %}">
    
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{% block og_title %}Free Food Near Me | MealzMapz - Community Food Sharing Platform{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Find free meals and surplus food in your neighborhood. Connect with local restaurants, food banks, and community kitchens. Join thousands reducing food waste daily.{% endblock %}">
    <meta property="og:image" content="{% block og_image %}https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png{% endblock %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="MealzMapz">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ request.url }}">
    <meta name="twitter:title" content="{% block twitter_title %}Free Food Near Me | MealzMapz{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Find free meals & surplus food nearby. Connect with restaurants donating food. Reduce waste, feed communities.{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png{% endblock %}">
    <meta name="twitter:site" content="@MealzMapz">
    <meta name="twitter:creator" content="@MealzMapz">
    
    <!-- Geo Meta Tags for Local SEO -->
    <meta name="geo.region" content="{% block geo_region %}US{% endblock %}">
    <meta name="geo.placename" content="{% block geo_placename %}United States{% endblock %}">
    <meta name="geo.position" content="{% block geo_position %}{% endblock %}">
    <meta name="ICBM" content="{% block icbm %}{% endblock %}">
    
    <!-- Mobile App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MealzMapz">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#10b981">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png">
    <link rel="manifest" href="/static/site.webmanifest">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "MealzMapz",
        "url": "https://mealmap-8aw4.onrender.com/",
        "logo": "https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png",
        "description": "Community-driven platform connecting surplus food with people in need. Find free meals, food banks, and community kitchens near you.",
        "sameAs": [
            "https://mealmap-8aw4.onrender.com/",
            "https://mealmap-8aw4.onrender.com/",
            "https://mealmap-8aw4.onrender.com/"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+1-555-123-4567",
            "contactType": "customer service",
            "areaServed": "US",
            "availableLanguage": ["en"]
        }
    }
    </script>
    
    <!-- Website Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "MealzMapz",
        "url": "https://mealmap-8aw4.onrender.com/",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://mealmap-8aw4.onrender.com//search?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- Local Business Schema for Community Service -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "MealzMapz Food Sharing Network",
        "image": "https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png",
        "@id": "https://mealmap-8aw4.onrender.com/",
        "url": "https://mealmap-8aw4.onrender.com/",
        "telephone": "+1-555-123-4567",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "US"
        },
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": [
                "Monday", "Tuesday", "Wednesday", "Thursday", 
                "Friday", "Saturday", "Sunday"
            ],
            "opens": "00:00",
            "closes": "23:59"
        },
        "priceRange": "Free",
        "servesCuisine": "Various",
        "acceptsReservations": "False"
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    {% block breadcrumb_schema %}
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://mealmap-8aw4.onrender.com/"
        }]
    }
    </script>
    {% endblock %}
    
    <!-- Additional Page-Specific Schema -->
    {% block additional_schema %}{% endblock %}
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-green': '#10b981',
                        'primary-blue': '#3b82f6',
                    }
                }
            }
        }
    </script>
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-green: #10b981;
            --primary-blue: #3b82f6;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .hover-scale {
            transition: transform 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: translateY(-5px);
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        /* Leaflet map fixes */
        .leaflet-container {
            background: #ddd;
            outline: 0;
        }
        
        .leaflet-tile {
            border-radius: 0;
        }
        
        /* Ensure Leaflet controls appear above other elements */
        .leaflet-control-container {
            font-family: inherit;
            pointer-events: none;
        }
        
        .leaflet-control {
            pointer-events: auto;
        }
        
        /* Fix for Leaflet attribution in Tailwind */
        .leaflet-control-attribution {
            font-size: 11px !important;
            background: rgba(255, 255, 255, 0.8) !important;
        }
        
        /* Prevent Tailwind from interfering with Leaflet popup */
        .leaflet-popup-content {
            margin: 13px 19px;
            line-height: 1.4;
        }
        
        .leaflet-popup-content h1,
        .leaflet-popup-content h2,
        .leaflet-popup-content h3,
        .leaflet-popup-content h4,
        .leaflet-popup-content h5,
        .leaflet-popup-content h6 {
            margin: 0 0 10px;
            font-weight: bold;
        }
    </style>
    
    <!-- Hreflang Tags for International SEO -->
    <link rel="alternate" hreflang="en" href="https://mealmap-8aw4.onrender.com/">
    <link rel="alternate" hreflang="x-default" href="https://mealmap-8aw4.onrender.com/">
    
    {% block head %}{% endblock %}
</head>
<body class="bg-gray-50 font-sans">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary-green text-white px-4 py-2 rounded">Skip to main content</a>
    
    <!-- Navigation with semantic HTML5 -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50" role="navigation" aria-label="Main navigation">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo with proper SEO -->
                <div class="flex items-center">
                    <a href="{{ url_for('index') if url_for else '/' }}" class="flex items-center" aria-label="MealzMapz Home - Find Free Food Near You">
                        <div class="mr-3 shadow-lg">
                            <img src="https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png"
                                alt="MealzMapz Logo"
                                class="w-12 h-12 object-contain">
                        </div>
                        <span class="text-xl font-bold text-gray-900">
                            <span class="sr-only">MealzMapz - </span>
                            MealzMapz
                        </span>
                    </a>
                </div>

                <!-- Navigation Links with SEO-friendly text -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="{{ url_for('index') if url_for else '/' }}" class="text-gray-700 hover:text-primary-green transition-colors font-medium" title="Find Free Food Near Me">Home</a>
                    <a href="{{ url_for('map_view') if url_for else '/map' }}" class="text-gray-700 hover:text-primary-green transition-colors font-medium" title="Food Donation Map - Locate Free Meals">Map</a>
                    <a href="{{ url_for('posts') if url_for else '/posts' }}" class="text-gray-700 hover:text-primary-green transition-colors font-medium" title="Available Surplus Food & Free Meals Today">Food Posts</a>
                    
                    {% if session and session.user_id %}
                        <a href="{{ url_for('add_post') if url_for else '/add_post' }}" class="text-gray-700 hover:text-primary-green transition-colors font-medium" title="Donate Surplus Food - Share Free Meals">Add Post</a>
                        <div class="relative group">
                            <button class="flex items-center text-gray-700 hover:text-primary-green transition-colors font-medium" aria-label="User menu" aria-haspopup="true">
                                {{ session.user_name or 'User' }}
                                <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200" role="menu">
                                <div class="py-1">
                                    <a href="{{ url_for('profile') if url_for else '/profile' }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors" role="menuitem">Profile</a>
                                    <a href="{{ url_for('logout') if url_for else '/logout' }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors" role="menuitem">Logout</a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <a href="{{ url_for('login') if url_for else '/login' }}" class="text-gray-700 hover:text-primary-green transition-colors font-medium" title="Login to Find Free Food">Login</a>
                        <a href="{{ url_for('signup') if url_for else '/signup' }}" class="bg-primary-green text-white px-6 py-2 rounded-full hover:bg-green-600 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold" title="Join MealzMapz - Start Sharing Food">Sign Up</a>
                    {% endif %}
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-700 hover:text-primary-green transition-colors" aria-label="Open mobile menu">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden border-t border-gray-200" role="navigation" aria-label="Mobile navigation">
            <div class="px-2 pt-2 pb-3 space-y-1 bg-white">
                <a href="{{ url_for('index') if url_for else '/' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Home</a>
                <a href="{{ url_for('map_view') if url_for else '/map' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Map</a>
                <a href="{{ url_for('posts') if url_for else '/posts' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Food Posts</a>
                
                {% if session and session.user_id %}
                    <a href="{{ url_for('add_post') if url_for else '/add_post' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Add Post</a>
                    <a href="{{ url_for('profile') if url_for else '/profile' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Profile</a>
                    <a href="{{ url_for('logout') if url_for else '/logout' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Logout</a>
                {% else %}
                    <a href="{{ url_for('login') if url_for else '/login' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Login</a>
                    <a href="{{ url_for('signup') if url_for else '/signup' }}" class="block px-3 py-2 text-gray-700 hover:text-primary-green hover:bg-gray-50 rounded-md transition-colors">Sign Up</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Flash Messages -->
    {% if get_flashed_messages %}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} bg-{% if category == 'error' %}red{% elif category == 'success' %}green{% elif category == 'warning' %}yellow{% else %}blue{% endif %}-100 border border-{% if category == 'error' %}red{% elif category == 'success' %}green{% elif category == 'warning' %}yellow{% else %}blue{% endif %}-400 text-{% if category == 'error' %}red{% elif category == 'success' %}green{% elif category == 'warning' %}yellow{% else %}blue{% endif %}-700 px-4 py-3 rounded-lg mb-4 shadow-sm" role="alert">
                        <span class="block sm:inline font-medium">{{ message }}</span>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
    {% endif %}

    <!-- Main Content with semantic HTML -->
    <main id="main-content" role="main">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer with enhanced SEO content -->
    <footer class="bg-gray-900 text-white mt-16" role="contentinfo">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Company Info with rich keywords -->
                <div class="md:col-span-2">
                    <div class="flex items-center mb-4">
                        <div class="mr-3 shadow-lg">
                            <img src="https://i.postimg.cc/Hn0jdwRJ/mealzmapz-high-resolution-logo.png"
                                alt="MealzMapz Logo"
                                class="w-12 h-12 object-contain">
                        </div>
                        <span class="text-xl font-bold">MealzMapz</span>
                    </div>
                    <h2 class="sr-only">About MealzMapz - Free Food Sharing Platform</h2>
                    <p class="text-gray-400 mb-4 max-w-md">
                        Connecting communities to reduce food waste and help those in need. Find free meals, surplus food from restaurants, community kitchens, and food banks near you. Together, we're building a world where no good food goes to waste.
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" aria-label="MealzMapz on Twitter" rel="noopener noreferrer" target="_blank">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" aria-label="MealzMapz on Facebook" rel="noopener noreferrer" target="_blank">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                            </svg>
                        </a>
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" aria-label="MealzMapz on Instagram" rel="noopener noreferrer" target="_blank">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links with SEO keywords -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="{{ url_for('index') if url_for else '/' }}" class="text-gray-400 hover:text-white transition-colors" title="Find Free Food Near Me">Home</a></li>
                        <li><a href="{{ url_for('map_view') if url_for else '/map' }}" class="text-gray-400 hover:text-white transition-colors" title="Food Donation Map">Map</a></li>
                        <li><a href="{{ url_for('posts') if url_for else '/posts' }}" class="text-gray-400 hover:text-white transition-colors" title="Available Free Meals">Food Posts</a></li>
                        <li><a href="{{ url_for('signup') if url_for else '/signup' }}" class="text-gray-400 hover:text-white transition-colors" title="Join Food Sharing Community">Join Us</a></li>
                        <li><a href="/about" class="text-gray-400 hover:text-white transition-colors" title="About Food Waste Reduction">About</a></li>
                        <li><a href="/help" class="text-gray-400 hover:text-white transition-colors" title="How to Find Free Food">Help</a></li>
                    </ul>
                </div>

                <!-- Resources with local SEO focus -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="Food Banks Near Me">Food Banks</a></li>
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="Community Kitchens Nearby">Community Kitchens</a></li>
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="Emergency Food Assistance">Emergency Food</a></li>
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="How to Donate Surplus Food">Donate Food</a></li>
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="Restaurant Food Donations">For Restaurants</a></li>
                        <li><a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors" title="Food Rescue Volunteers">Volunteers</a></li>
                    </ul>
                </div>

                <!-- Contact with local business info -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <div class="space-y-2 text-gray-400">
                        <p class="flex items-center" itemscope itemtype="https://schema.org/ContactPoint">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                            </svg>
                            <span itemprop="email">info@mealzmapz.com</span>
                        </p>
                        <p class="flex items-center" itemscope itemtype="https://schema.org/ContactPoint">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                            </svg>
                            <span itemprop="telephone">+1-555-123-4567</span>
                        </p>
                        <p class="flex items-start">
                            <svg class="w-4 h-4 mr-2 mt-1" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-sm">Serving communities nationwide<br>24/7 food rescue network</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Legal and Copyright with enhanced SEO -->
            <div class="border-t border-gray-800 mt-8 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="text-gray-400 text-sm mb-4 md:mb-0">
                        <p>&copy; 2025 MealzMapz. All rights reserved. Made with ♥ for communities worldwide.</p>
                        <p class="mt-1">Connecting surplus food with hungry neighbors since 2025.</p>
                    </div>
                    <div class="flex space-x-6 text-sm">
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
                        <a href="https://mealmap-8aw4.onrender.com/" class="text-gray-400 hover:text-white transition-colors">Sitemap</a>
                    </div>
                </div>
                
                <!-- Additional SEO footer content -->
                <div class="mt-6 text-xs text-gray-500 text-center">
                    <p>
                         free food near me, surplus food donation, community kitchen locations, food bank directory, 
                        restaurant leftover donations, reduce food waste, food insecurity help, meal assistance programs, 
                        emergency food resources, food sharing network, hunger relief, community food programs
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-primary-green text-white p-3 rounded-full shadow-lg hover:bg-green-600 transition-all duration-300 opacity-0 invisible hover:scale-110" aria-label="Back to top">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
        </svg>
    </button>

    <!-- Leaflet JS - Load before custom scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Location services
        function askAndStoreLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    fetch("{{ url_for('set_location') if url_for else '/set_location' }}", {
                        method: "POST",
                        headers: { "Content-Type": "application/x-www-form-urlencoded" },
                        body: `lat=${position.coords.latitude}&lon=${position.coords.longitude}`
                    }).then(() => {
                        console.log("Location saved in session");
                    }).catch(err => console.error("Failed to save location", err));
                }, function(error) {
                    console.log("Geolocation error:", error.message);
                });
            } else {
                console.log("Geolocation is not supported by this browser.");
            }
        }

        // Mobile menu functionality
        function initializeMobileMenu() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                });
                
                // Close mobile menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            }
        }

        // Back to top functionality
        function initializeBackToTop() {
            const backToTopButton = document.getElementById('back-to-top');
            
            if (backToTopButton) {
                // Show/hide button based on scroll position
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        backToTopButton.classList.remove('opacity-0', 'invisible');
                    } else {
                        backToTopButton.classList.add('opacity-0', 'invisible');
                    }
                });

                // Smooth scroll to top when clicked
                backToTopButton.addEventListener('click', function() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
        }

        // Auto-dismiss alerts
        function initializeAlerts() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                setTimeout(function() {
                    alert.style.transition = 'opacity 0.5s ease-out';
                    alert.style.opacity = '0';
                    setTimeout(function() {
                        if (alert.parentNode) {
                            alert.parentNode.removeChild(alert);
                        }
                    }, 500);
                }, 5000);
            });
        }

        // Performance optimization - lazy load images
        function initializeLazyLoading() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        imageObserver.unobserve(img);
                    }
                });
            });

            images.forEach(img => imageObserver.observe(img));
        }

        // Initialize all functionality when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            askAndStoreLocation();
            initializeMobileMenu();
            initializeBackToTop();
            initializeAlerts();
            
            // Initialize lazy loading if supported
            if ('IntersectionObserver' in window) {
                initializeLazyLoading();
            }
        });

        // Service Worker registration for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
    
    <!-- Additional page-specific scripts -->
    {% block scripts %}{% endblock %}

    <!-- Analytics and tracking scripts would go here in production -->
    <!-- Google Analytics, Meta Pixel, etc. -->
    
</body>
</html>